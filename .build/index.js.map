{
  "version": 3,
  "sources": ["../index.ts"],
  "sourcesContent": ["console.log(`\n888              .d888      d8888                            888      888888b.            888    \n888             d88P\"      d88888                            888      888  \"88b           888    \n888             888       d88P888                            888      888  .88P           888    \n888888 88888b.  888888   d88P 888 88888b.   .d88b.   .d88b.  888      8888888K.   .d88b.  888888 \n888    888 \"88b 888     d88P  888 888 \"88b d88P\"88b d8P  Y8b 888      888  \"Y88b d88\"\"88b 888    \n888    888  888 888    d88P   888 888  888 888  888 88888888 888      888    888 888  888 888    \nY88b.  888  888 888   d8888888888 888  888 Y88b 888 Y8b.     888      888   d88P Y88..88P Y88b.  \n \"Y888 888  888 888  d88P     888 888  888  \"Y88888  \"Y8888  888      8888888P\"   \"Y88P\"   \"Y888 \n                                                888                                              \n                                           Y8b d88P                                              \n                                            \"Y88P\"  \n    -> Kahoot Bot v1.1\n`);\n\nconst Kahoot = require('kahoot.js-updated');\nconst readline = require('readline');\n\nconst readlines = readline.createInterface({\n\tinput: process.stdin,\n\toutput: process.stdout\n});\n\nconst log = {\n\tsuccess: (message: string): void =>\n\t\tconsole.log(`\\x1B[1;32m[+]\\x1B[1;0m ${message}`),\n\terror: (message: string): void =>\n\t\tconsole.log(`\\x1B[1;31m[-]\\x1B[1;0m ${message}`),\n\tquestion: (message: string): string => `\\x1B[1;34m[?]\\x1B[1;0m ${message}`\n};\n\nconst wait = (time: number): Promise<void> =>\n\tnew Promise((resolve) => setTimeout(resolve, time));\n\nfunction formatNumber(number: number): string {\n\tif (number < 10) return `0${number}`;\n\treturn `${number}`;\n}\n\nfunction stdinQuestion(question: string): Promise<string> {\n\treturn new Promise((resolve): void => {\n\t\treadlines.question(log.question(question), (input: string): void =>\n\t\t\tresolve(input)\n\t\t);\n\t});\n}\n\nasync function start() {\n\tconst leaderNameInput = await stdinQuestion('Nombre del bot l\u00EDder: ');\n\n\tif (!leaderNameInput) {\n\t\tlog.error('No ingresaste ning\u00FAn nombre del bot l\u00EDder.');\n\t\treturn start();\n\t}\n\n\tconst nameInput = await stdinQuestion('Nombre de los bots a crear: ');\n\n\tif (!nameInput) {\n\t\tlog.error('No ingresaste ning\u00FAn nombre de los bots.');\n\t\treturn start();\n\t}\n\n\tconst botsInput = await stdinQuestion('N\u00FAmero de bots a crear: ');\n\n\tif (!botsInput) {\n\t\tlog.error('No ingresaste ning\u00FAn n\u00FAmero de bots.');\n\t\treturn start();\n\t}\n\n\tconst bots = parseInt(botsInput);\n\n\tif (isNaN(bots)) {\n\t\tlog.error('No ingresaste un n\u00FAmero valido de bots a crear.');\n\t\treturn start();\n\t}\n\n\tif (bots < 1) {\n\t\tlog.error('El n\u00FAmero de bots es muy peque\u00F1o.');\n\t\treturn start();\n\t}\n\n\tconst pinInput = await stdinQuestion('Pin de la partida: ');\n\n\tif (!pinInput) {\n\t\tlog.error('No ingresaste ning\u00FAn pin de la partida.');\n\t\treturn start();\n\t}\n\n\tconst leader = new Kahoot();\n\n\tawait wait(1000);\n\n\tconst successLeaderSession = await leader\n\t\t.join(pinInput, leaderNameInput)\n\t\t.then(() => {\n\t\t\tlog.success(`[LEADER] Sesi\u00F3n l\u00EDder iniciada como ${leader.name}.`);\n\t\t\treturn true;\n\t\t})\n\t\t.catch(() => {\n\t\t\tlog.error(\n\t\t\t\t`[LEADER] Error intentando acceder a la sala ${pinInput} como ${leaderNameInput}.`\n\t\t\t);\n\t\t\treturn false;\n\t\t});\n\n\tif (!successLeaderSession) return start();\n\n\tconsole.log(leader);\n\n\tleader.on('QuizStart', (quiz) => {\n\t\tlog.success(\n\t\t\t`[LEADER] Nuevo quiz empezado de ${quiz.questionCount} preguntas.`\n\t\t);\n\t});\n\n\tleader.on('QuestionReady', async (question: any) => {\n\t\tlog.success(\n\t\t\t`[LEADER] Nueva pregunta de ${question.numberOfChoices} respuestas.`\n\t\t);\n\t});\n\n\tleader.on('QuestionStart', async (question: any) => {\n\t\tconst answer = Math.floor(Math.random() * question.numberOfChoices);\n\n\t\tawait question\n\t\t\t.answer(answer)\n\t\t\t.then(() => {\n\t\t\t\tlog.success(\n\t\t\t\t\t`[LEADER] Respondiendo con n\u00FAmero ${answer} como ${leader.name}.`\n\t\t\t\t);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tlog.error(\n\t\t\t\t\t`[LEADER] No he podido responder con el n\u00FAimero ${answer} como ${leader.name}.`\n\t\t\t\t);\n\t\t\t});\n\t});\n\n\tleader.on('QuestionEnd', async (question: any) => {\n\t\tlog.success(\n\t\t\t`[LEADER] Pregunta acabada con las respuestas correctas: ${\n\t\t\t\tquestion.correctChoices\n\t\t\t\t\t? question.correctChoices\n\t\t\t\t\t\t\t.map((choice) => choice + 1)\n\t\t\t\t\t\t\t.join(', ')\n\t\t\t\t\t: 'Ninguna'\n\t\t\t}.`\n\t\t);\n\t});\n\n\tleader.on('QuizEnd', (quiz) => {\n\t\tlog.success(`[LEADER] Quiz acabado (${quiz.quizTitle}).`);\n\t\tstop();\n\t});\n\n\tfor (let i = 0; i < bots; i++) {\n\t\tconst clientNumber = formatNumber(i + 1);\n\n\t\tconst name = `${nameInput} ${clientNumber}`;\n\n\t\tconst client = new Kahoot();\n\n\t\tawait wait(1000);\n\n\t\tclient\n\t\t\t.join(pinInput, name)\n\t\t\t.then(() => {\n\t\t\t\tlog.success(\n\t\t\t\t\t`[SLAVE ${clientNumber}] Sesi\u00F3n iniciada como ${client.name}.`\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tlog.error(\n\t\t\t\t\t`[SLAVE ${clientNumber}] Error intentando iniciar sesi\u00F3n como ${name}`\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\tclient.on('QuestionStart', async (question: any) => {\n\t\t\tconst answer = Math.floor(Math.random() * question.numberOfChoices);\n\n\t\t\tawait question\n\t\t\t\t.answer(answer)\n\t\t\t\t.then(() => {\n\t\t\t\t\tlog.success(\n\t\t\t\t\t\t`[SLAVE ${clientNumber}] Respondiendo con n\u00FAmero ${answer} como ${client.name}.`\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tlog.error(\n\t\t\t\t\t\t`[SLAVE ${clientNumber}] No he podido responder con el n\u00FAmero ${answer} como ${client.name}.`\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t});\n\t}\n}\n\nfunction stop() {\n\tconsole.log('\\n');\n\tlog.error(`Saliendo...`);\n\treadlines.pause();\n\tprocess.exit(0);\n}\n\nstart();\n\nreadlines.on('SIGINT', () => stop());\n"],
  "mappings": "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",
  "names": []
}
